# encoding: utf-8

patch:
  switches:
    - name: ascii_mode
      reset: 0
      states: ["ä¸­æ–‡", "è¥¿æ–‡"]
    - name: full_shape
      states: ["åŠè§’", "å…¨è§’"]
    - name: zh_simp                      # (â€»1) ç¹ç®€è½¬æ¢
      reset: 1
      states: ["æ¼¢å­—", "æ±‰å­—"]
    - name: ascii_punct
      states: ["ã€‚ï¼Œ", "ï¼ï¼Œ"]
    - options: ["utf8", "gbk", "gb2312"] # (â€»2)å­—ç¬¦é›†é€‰å•
      reset: 0                           #     é»˜è®¤ UTF8
      states:
        - UTF-8
        - GBK
        - GB2312
    - name: show_emoji
      reset: 1
      states: [ "ğŸˆšï¸ï¸\uFE0E", "ğŸˆ¶ï¸ï¸\uFE0F" ]

  # å·¦å³ Shift ä¸Šå±è‹±æ–‡
  ascii_composer/switch_key:
    Shift_L: commit_code
    Shift_R: commit_code

  # ä¸Šä¸‹æ”¹å·¦å³ï¼›,. æ”¹ç¿»é¡µ
  key_binder:
    bindings:
      - {accept: Up, send: Left, when: composing}
      - {accept: Down, send: Right, when: composing}
      - {accept: comma, send: Page_Up, when: composing}
      - {accept: period, send: Page_Down, when: composing}

  engine/filters:
      - simplifier
      - simplifier@emoji_conversion
      - uniquifier
      - charset_filter@gbk              # (â€»3) GBK è¿‡æ»¤
      - single_char_filter

  emoji_conversion:
    opencc_config: emoji.json
    option_name: show_emoji
    tags: abc

  # è½½å…¥è‡ªå®šä¹‰è¯åº“è¡¨
  "translator/dictionary": oott123_personal

  "recognizer/patterns/punct": "^/[a-z]*$"
  punctuator:
    import_preset: "luna_pinyin.extended/symbols"

  # åæŸ¥ï¼ˆç¬”ç”»å’Œè¡¨æƒ…ï¼‰è¾“å…¥ä¾èµ–
  "schema/dependencies":
      - stroke
      - emoji
  "recognizer/patterns/reverse_lookup": "u(b|e)[a-z]*'?$"

  # ç¬”ç”»è¾“å…¥
  "engine/translators/@after 1": reverse_lookup_translator@reverse_lookup_stroke
  reverse_lookup_stroke:
    dictionary: stroke
    enable_completion: true
    prefix: ub
    suffix: "'"
    tips: 'ã€Œç¬”ç”»ã€'
    preedit_format:
      - xlit/hspnz/ä¸€ä¸¨ä¸¿ä¸¶ä¹™/
    comment_format:
      - xform/([nl])v/$1Ã¼/

  # è¡¨æƒ…è¾“å…¥
  "engine/translators/@after 2": reverse_lookup_translator@reverse_lookup_emoji
  reverse_lookup_emoji:
    dictionary: emoji
    enable_completion: true
    prefix: ue
    suffix: "'"
    tips: 'ã€Œè¡¨æƒ…ã€'

  # é€šè¿‡ opencc è§¦å‘çš„ä¸­æ–‡å­—ç¬¦è¡¨æƒ…è¾“å…¥ï¼›éœ€è¦ plum åŒ…
  # __include: emoji_suggestion:/patch

  # æ¨¡ç³ŠéŸ³: en[g] in[g] z[h]
  # "speller/algebra/@after 1": derive/([ei])n$/$1ng/
  # "speller/algebra/@after 2": derive/([ei])ng$/$1n/
  # "speller/algebra/@after 3": derive/^([z])h/$1/
  # "speller/algebra/@after 4": derive/^([z])([^h])/$1h$2/

  # æ”¹å¯«æ‹¼å¯«é‹ç®—ï¼Œä½¿å¾—å«è¥¿æ–‡çš„è©å½™ï¼ˆä½æ–¼ luna_pinyin.cn_en.dict.yaml ä¸­ï¼‰ä¸å½±éŸ¿ç°¡æ‹¼åŠŸèƒ½ï¼ˆæ³¨æ„ï¼Œæ­¤åŠŸèƒ½åªé©ç”¨æ–¼æœ™æœˆæ‹¼éŸ³ç³»åˆ—æ–¹æ¡ˆï¼Œä¸é©ç”¨æ–¼å„é¡é›™æ‹¼æ–¹æ¡ˆï¼‰
  # æœ¬æ¢è£œéªåªåœ¨ã€Œå°ç‹¼æ¯« 0.9.30ã€ã€ã€Œé¼ é¬šç®¡ 0.9.25 ã€ã€ã€ŒRime-1.2ã€åŠæ›´é«˜çš„ç‰ˆæœ¬ä¸­èµ·ä½œç”¨ã€‚
  "speller/algebra/@before 0": xform/^([b-df-hj-np-tv-z])$/$1_/
